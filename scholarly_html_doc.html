<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Art Gallery RDF Application - Technical Documentation</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Modern documentation styling */
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            color: #333;
            font-size: 14px; /* Reduced font size */
        }

        header {
            border-bottom: 2px solid #eee;
            border-top: 20px solid #eee;
            margin-bottom: 1em; /* Reduced margin */
            padding-bottom: 0.5em; /* Reduced padding */
        }

        nav {
            background: #2c3e50;
            color: #fff;
            /*position: fixed;*/
            width: 100%;
            top: 0;
            left: 0;
            z-index: 1000;
        }
        
        #toc {
            /*background: #f8f9fa;*/
            /*padding: 10px;*/
            border-radius: 5px;
            margin: 20px 0;
            font-size: 12px; /* Smaller font size */
        }

        nav ul {
            list-style: none;
            display: flex;
            justify-content: space-around;
        }

        nav ul li {
            margin: 0 1em;
        }

        nav ul li a {
            color: #fff;
            text-decoration: none;
            font-weight: bold;
        }

        h1, h2, h3 {
            color: #2c3e50;
        }

        .metadata {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }

        .architecture-diagram {
            text-align: center;
            margin: 2em 0;
        }

        pre, code {
            background: #f6f8fa;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1em 0;
        }

        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }

        th {
            background-color: #f6f8fa;
        }

        .api-endpoint {
            background: #fff8dc;
            padding: 10px;
            border-left: 4px solid #ffd700;
            margin: 10px 0;
        }

        footer {
            background: #2c3e50;
            color: #fff;
            text-align: center;
            padding: 0.8em 0; /* Smaller padding */
            width: 100%;
            position: absolute;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        footer p {
            margin: 0;
            font-size: 12px; /* Smaller font size */
        }
        .screenshot {
            max-width: 100%;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin: 15px 0;
        }

        .sequence-diagram {
            background: #fff;
            padding: 20px;
            margin: 15px 0;
        }

        .metrics-table {
            width: 100%;
            border-collapse: collapse;
        }

        .alert-box {
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid;
        }

        .alert-warning {
            background: #fff3cd;
            border-color: #ffeeba;
        }

        .alert-danger {
            background: #f8d7da;
            border-color: #f5c6cb;
        }

        .security-note {
            background: #e2e3e5;
            border-left: 4px solid #383d41;
            padding: 15px;
            margin: 15px 0;
        }
    </style>
</head>
<body>
<nav>
    <ul>
        <li><a href="#introduction"><i class="fas fa-info-circle"></i> Introduction</a></li>
        <li><a href="#architecture"><i class="fas fa-sitemap"></i> Architecture</a></li>
        <li><a href="#microservices"><i class="fas fa-cogs"></i> Microservices</a></li>
        <li><a href="#ontology"><i class="fas fa-project-diagram"></i> Ontology</a></li>
        <li><a href="#features"><i class="fas fa-list"></i> Features</a></li>
        <li><a href="#api"><i class="fas fa-code"></i> API</a></li>
        <li><a href="#deployment"><i class="fas fa-cloud-upload-alt"></i> Deployment</a></li>
    </ul>
</nav>

<header>
    <h1>Art Gallery RDF Application - Technical Documentation</h1>
    <div class="metadata">
        <p><strong>Version:</strong> 1.0.0</p>
        <p><strong>Last Updated:</strong> 2025-02-03</p>
        <p><strong>Authors:</strong> Feraru Ionut, Nastase Valentin-Codrin</p>
    </div>
</header>

<section id="toc">
    <h2>Table of Contents</h2>
    <nav>
        <ul>
            <li><a href="#introduction"><i class="fas fa-info-circle"></i> Introduction</a></li>
            <li><a href="#architecture"><i class="fas fa-sitemap"></i> System Architecture</a></li>
            <li><a href="#microservices"><i class="fas fa-cogs"></i> Microservices</a></li>
            <li><a href="#ontology"><i class="fas fa-project-diagram"></i> RDF Ontology</a></li>
            <li><a href="#features"><i class="fas fa-list"></i> Features and Pages</a></li>
            <li><a href="#api"><i class="fas fa-code"></i> API Documentation</a></li>
            <li><a href="#deployment"><i class="fas fa-cloud-upload-alt"></i> Deployment</a></li>
        </ul>
    </nav>
</section>

<section id="introduction">
    <h2>1. Introduction</h2>
    <p>This document provides comprehensive technical documentation for the Art Gallery RDF Application, a semantic web application designed to manage and query art-related data using RDF and SPARQL technologies.</p>

    <h3>1.1 Purpose</h3>
    <p>The application serves as a platform for exploring and analyzing art collections, providing detailed information about paintings, sculptures, and museums through semantic web technologies.</p>

    <h3>1.2 Technology Stack</h3>
    <ul>
        <li>Frontend: HTML5, CSS3, JavaScript</li>
        <li>Backend: .NET Core with Razor Pages</li>
        <li>RDF Storage: [Your RDF Store, e.g., GraphDB, Virtuoso]</li>
        <li>Query Language: SPARQL 1.1</li>
    </ul>
</section>

<section id="architecture">
    <h2>2. System Architecture</h2>
    <div class="architecture-diagram">
        [Place for your architecture diagram]
    </div>

    <h3>2.1 Component Overview</h3>
    <table>
        <tr>
            <th>Component</th>
            <th>Description</th>
            <th>Technologies</th>
        </tr>
        <tr>
            <td>UI Microservice</td>
            <td>Handles user interface and client-side logic</td>
            <td>.NET Razor, JavaScript</td>
        </tr>
        <tr>
            <td>RDF Service</td>
            <td>Manages RDF data and SPARQL queries</td>
            <td>.NET Core, RDF.NET</td>
        </tr>
    </table>
</section>

<section id="microservices">
    <h2>3. Microservices</h2>

    <h3>3.1 UI Microservice</h3>
    <pre>
Project Structure:
/Pages
    /Models
    /Museums
    /Sculptures
    /DataAnalyzer
/wwwroot
    /js
    /css
    /lib
    </pre>

    <h3>3.2 RDF Service</h3>
    <div class="api-endpoint">
        <h4>Main Endpoints:</h4>
        <code>
            GET /api/rdf/paintings
            GET /api/rdf/museums
            GET /api/rdf/sculptures
            GET /api/rdf/ontology
        </code>
    </div>
</section>

<section id="ontology">
    <h2>4. RDF Ontology</h2>
    <p>The application utilizes a custom ontology for representing art-related concepts and relationships.</p>

    <h3>4.1 Core Classes</h3>
    <pre>
:Artwork
    :Painting
    :Sculpture
:Museum
:Artist
:Period
    </pre>

    <h3>4.2 Key Properties</h3>
    <pre>
:hasCreator
:isDisplayedAt
:createdIn
:hasStyle
:hasMedium
    </pre>
</section>

<section id="features">
    <h2>5. Features and Pages</h2>

    <h3>5.1 Paintings Page</h3>
    <p>Implements SPARQL queries for painting-related data:</p>
    <pre>
SELECT ?painting ?title ?artist
WHERE {
    ?painting a :Painting ;
             :title ?title ;
             :hasCreator ?artist .
}
    </pre>

    <h3>5.2 Museums Page</h3>
    <p>Features interactive museum exploration with collection statistics.</p>

    <h3>5.3 Sculptures Page</h3>
    <p>Provides detailed information about sculptural works and their locations.</p>

    <h3>5.4 Ontology Visualization</h3>
    <p>Interactive visualization of the RDF schema using [Your Visualization Library].</p>
</section>

<section id="api">
    <h2>6. API Documentation</h2>

    <h3>6.1 SPARQL Endpoints</h3>
    <div class="api-endpoint">
        <p><strong>Query Endpoint:</strong> <code>/api/sparql/query</code></p>
        <p><strong>Update Endpoint:</strong> <code>/api/sparql/update</code></p>
    </div>

    <h3>6.2 RDF Service API</h3>
    <div class="api-endpoint">
        <p><strong>Get RDF Data:</strong> <code>GET /api/rdf/{resource-type}</code></p>
        <p><strong>Update RDF Data:</strong> <code>POST /api/rdf/{resource-type}</code></p>
    </div>
</section>

<section id="deployment">
    <h2>7. Deployment</h2>

    <h3>7.1 Requirements</h3>
    <ul>
        <li>.NET Core 7.0 or higher</li>
        <li>RDF Triple Store</li>
        <li>Web Server (IIS/Nginx)</li>
    </ul>

    <h3>7.2 Configuration</h3>
    <pre>
{
    "RdfService": {
        "EndpointUrl": "http://localhost:8890/sparql",
        "GraphUri": "http://example.org/artgallery"
    }
}
    </pre>
</section>
<section id="detailed-tech-stack">
    <h2>8. Detailed Technology Stack Analysis</h2>

    <h3>8.1 Frontend Technologies</h3>
    <div class="component-details">
        <h4>HTML5 & CSS3</h4>
        <ul>
            <li><strong>Semantic HTML5 Elements Used:</strong>
                <ul>
                    <li>&lt;header&gt; - For page headers and section headers</li>
                    <li>&lt;nav&gt; - For navigation menus</li>
                    <li>&lt;main&gt; - For main content areas</li>
                    <li>&lt;section&gt; - For logical content grouping</li>
                    <li>&lt;article&gt; - For self-contained content pieces</li>
                    <li>&lt;aside&gt; - For sidebar information</li>
                    <li>&lt;footer&gt; - For page footers</li>
                </ul>
            </li>
            <li><strong>CSS3 Features Implemented:</strong>
                <ul>
                    <li>Flexbox for responsive layouts</li>
                    <li>CSS Grid for complex page structures</li>
                    <li>CSS Variables for theme consistency</li>
                    <li>Media Queries for responsive design</li>
                    <li>Transitions and Animations for interactive elements</li>
                </ul>
            </li>
        </ul>

        <h4>JavaScript Implementation</h4>
        <pre>
// Example of SPARQL Query Handler
class SparqlQueryHandler {
    constructor(endpoint) {
        this.endpoint = endpoint;
    }

    async executeQuery(query) {
        try {
            const response = await fetch(this.endpoint, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                    'Accept': 'application/sparql-results+json'
                },
                body: `query=${encodeURIComponent(query)}`
            });
            return await response.json();
        } catch (error) {
            console.error('SPARQL Query Error:', error);
            throw error;
        }
    }
}

// Example of RDF Data Visualization
class RdfVisualizer {
    constructor(containerId) {
        this.container = document.getElementById(containerId);
        this.viz = new Viz(); // Using Viz.js for RDF graph visualization
    }

    async renderOntology(rdfData) {
        const dotGraph = this.convertRdfToDot(rdfData);
        try {
            const element = await this.viz.renderSVGElement(dotGraph);
            this.container.appendChild(element);
        } catch (error) {
            console.error('Visualization Error:', error);
        }
    }
}
        </pre>
    </div>

    <h3>8.2 Backend Technologies (.NET Razor)</h3>
    <div class="component-details">
        <h4>Core Components</h4>
        <pre>
// Example Razor Page Model
public class PaintingsModel : PageModel
{
    private readonly IRdfService _rdfService;
    private readonly ILogger<PaintingsModel> _logger;

    public PaintingsModel(
        IRdfService rdfService,
        ILogger<PaintingsModel> logger)
    {
        _rdfService = rdfService;
        _logger = logger;
    }

    public IList<Painting> Paintings { get; set; }

    public async Task OnGetAsync()
    {
        var query = @"
            PREFIX art: <http://example.org/artontology#>
            SELECT ?painting ?title ?artist ?year
            WHERE {
                ?painting a art:Painting ;
                         art:title ?title ;
                         art:creator ?artist ;
                         art:year ?year .
            }
            ORDER BY ?year";

        Paintings = await _rdfService.ExecuteQuery<Painting>(query);
    }
}
        </pre>

        <h4>Dependency Injection Configuration</h4>
        <pre>
public void ConfigureServices(IServiceCollection services)
{
    services.AddRazorPages();
    
    // RDF Service Configuration
    services.AddSingleton<IRdfService, RdfService>();
    services.Configure<RdfOptions>(Configuration.GetSection("RdfService"));
    
    // Add CORS policy for API access
    services.AddCors(options =>
    {
        options.AddPolicy("AllowSpecificOrigin",
            builder => builder
                .WithOrigins("http://localhost:5000")
                .AllowAnyMethod()
                .AllowAnyHeader());
    });
}
        </pre>
    </div>

    <h3>8.3 RDF Service Architecture</h3>
    <div class="component-details">
        <h4>Service Interface</h4>
        <pre>
public interface IRdfService
{
    Task<IEnumerable<T>> ExecuteQuery<T>(string sparqlQuery);
    Task<bool> UpdateData(string updateQuery);
    Task<IGraph> GetOntologyGraph();
}
        </pre>

        <h4>Implementation Details</h4>
        <pre>
public class RdfService : IRdfService
{
    private readonly IOptions<RdfOptions> _options;
    private readonly HttpClient _httpClient;
    private readonly ILogger<RdfService> _logger;

    public RdfService(
        IOptions<RdfOptions> options,
        HttpClient httpClient,
        ILogger<RdfService> logger)
    {
        _options = options;
        _httpClient = httpClient;
        _logger = logger;
    }

    public async Task<IEnumerable<T>> ExecuteQuery<T>(string sparqlQuery)
    {
        try
        {
            var endpoint = _options.Value.EndpointUrl;
            var response = await _httpClient.PostAsync(endpoint,
                new StringContent(sparqlQuery));
            
            // Process SPARQL results
            var results = await ProcessResults<T>(response);
            return results;
        }
        catch (Exception ex)
        {
            _logger.LogError(ex, "Error executing SPARQL query");
            throw;
        }
    }
}
        </pre>
    </div>
</section>

<section id="ontology-details">
    <h2>9. Detailed Ontology Documentation</h2>

    <h3>9.1 Core Ontology Classes</h3>
    <div class="component-details">
        <pre>
@prefix art: <http://example.org/artontology#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .

art:Artwork
    rdf:type owl:Class ;
    rdfs:label "Artwork" ;
    rdfs:comment "Base class for all artistic works" .

art:Painting
    rdf:type owl:Class ;
    rdfs:subClassOf art:Artwork ;
    rdfs:label "Painting" ;
    rdfs:comment "A work of art produced through painting" .

art:Sculpture
    rdf:type owl:Class ;
    rdfs:subClassOf art:Artwork ;
    rdfs:label "Sculpture" ;
    rdfs:comment "A three-dimensional artistic work" .
        </pre>

        <h4>Property Definitions</h4>
        <pre>
art:hasCreator
    rdf:type owl:ObjectProperty ;
    rdfs:domain art:Artwork ;
    rdfs:range art:Artist ;
    rdfs:label "has creator" .

art:createdIn
    rdf:type owl:DatatypeProperty ;
    rdfs:domain art:Artwork ;
    rdfs:range xsd:integer ;
    rdfs:label "created in year" .
        </pre>
    </div>

    <h3>9.2 Example SPARQL Queries</h3>
    <div class="component-details">
        <h4>Complex Query Examples</h4>
        <pre>
# Find all paintings from a specific period with their creators
PREFIX art: <http://example.org/artontology#>
SELECT ?painting ?title ?artist ?period
WHERE {
    ?painting a art:Painting ;
             art:title ?title ;
             art:hasCreator ?artist ;
             art:period ?period .
    FILTER(?period = "Renaissance")
}
ORDER BY ?title

# Count artworks per museum
PREFIX art: <http://example.org/artontology#>
SELECT ?museum (COUNT(?artwork) as ?artworkCount)
WHERE {
    ?artwork art:isDisplayedAt ?museum .
}
GROUP BY ?museum
ORDER BY DESC(?artworkCount)
        </pre>
    </div>
</section>

<section id="microservices-detailed">
    <h2>10. Microservices Implementation Details</h2>

    <h3>10.1 UI Microservice Architecture</h3>
    <div class="component-details">
        <h4>Project Structure</h4>
        <pre>
ArtGallery.UI/
├── Pages/
│   ├── Paintings/
│   │   ├── Index.cshtml
│   │   ├── Index.cshtml.cs
│   │   ├── Details.cshtml
│   │   └── Details.cshtml.cs
│   ├── Museums/
│   ├── Sculptures/
│   └── Ontology/
├── Services/
│   ├── Interfaces/
│   └── Implementations/
├── Models/
└── wwwroot/
    ├── js/
    │   ├── rdfVisualizer.js
    │   └── sparqlQueryHandler.js
    └── css/
        └── styles.css
        </pre>

        <h4>Key Components</h4>
        <ul>
            <li><strong>Pages:</strong> Razor Pages implementing the UI</li>
            <li><strong>Services:</strong> Internal services for data processing</li>
            <li><strong>Models:</strong> Data models and DTOs</li>
            <li><strong>wwwroot:</strong> Static files and client-side resources</li>
        </ul>
    </div>

    <h3>10.2 RDF Service Architecture</h3>
    <div class="component-details">
        <h4>Project Structure</h4>
        <pre>
ArtGallery.RdfService/
├── Controllers/
│   ├── RdfController.cs
│   └── SparqlController.cs
├── Services/
│   ├── IRdfStore.cs
│   └── RdfStore.cs
├── Models/
│   ├── RdfEntity.cs
│   └── SparqlQuery.cs
└── Configuration/
    └── RdfStoreOptions.cs
        </pre>

        <h4>Service Implementation</h4>
        <pre>
public class RdfStore : IRdfStore
{
    private readonly ITripleStore _store;
    private readonly IConfiguration _configuration;

    public RdfStore(IConfiguration configuration)
    {
        _configuration = configuration;
        _store = new TripleStore();
        InitializeStore();
    }

    private void InitializeStore()
    {
        // Load initial RDF data
        var graph = new Graph();
        graph.LoadFromFile("ontology.ttl");
        _store.Add(graph);
    }

    public async Task<IEnumerable<Triple>> QueryAsync(string sparqlQuery)
    {
        var results = _store.ExecuteQuery(sparqlQuery);
        return await Task.FromResult(results);
    }
}
        </pre>
    </div>
</section>

<section id="deployment-details">
    <h2>11. Deployment and Configuration Guide</h2>

    <h3>11.1 Environment Setup</h3>
    <div class="component-details">
        <h4>Required Software</h4>
        <ul>
            <li>.NET SDK 7.0 or higher</li>
            <li>RDF Triple Store (e.g., GraphDB, Virtuoso)</li>
            <li>Node.js (for frontend build tools)</li>
            <li>Docker (optional, for containerization)</li>
        </ul>

        <h4>Configuration Files</h4>
        <pre>
// appsettings.json
{
    "RdfService": {
        "EndpointUrl": "http://localhost:8890/sparql",
        "GraphUri": "http://example.org/artgallery",
        "Username": "dba",
        "Password": "dba"
    },
    "Logging": {
        "LogLevel": {
            "Default": "Information",
            "Microsoft": "Warning"
        }
    },
    "AllowedHosts": "*"
}
        </pre>
    </div>

    <h3>11.2 Docker Configuration</h3>
    <div class="component-details">
        <pre>
# Dockerfile for UI Service
FROM mcr.microsoft.com/dotnet/aspnet:7.0 AS base
WORKDIR /app
EXPOSE 80

FROM mcr.microsoft.com/dotnet/sdk:7.0 AS build
WORKDIR /src
COPY ["ArtGallery.UI/ArtGallery.UI.csproj", "ArtGallery.UI/"]
RUN dotnet restore "ArtGallery.UI/ArtGallery.UI.csproj"
COPY . .
WORKDIR "/src/ArtGallery.UI"
RUN dotnet build "ArtGallery.UI.csproj" -c Release -o /app/build

FROM build AS publish
RUN dotnet publish "ArtGallery.UI.csproj" -c Release -o /app/publish

FROM base AS final
WORKDIR /app
COPY --from=publish /app/publish .
ENTRYPOINT ["dotnet", "ArtGallery.UI.dll"]
        </pre>
    </div>
</section>

<section id="implementation-examples">
    <h2>12. Implementation Examples</h2>

    <h3>12.1 SPARQL Query Implementation</h3>
    <div class="component-details">
        <pre>
// Example from PaintingsController.cs
[HttpGet]
public async Task<IActionResult> GetPaintingsByPeriod(string period)
{
    var query = @"
        PREFIX art: <http://example.org/artontology#>
        SELECT ?painting ?title ?artist ?museum
        WHERE {
            ?painting a art:Painting ;
                     art:title ?title ;
                     art:creator ?artist ;
                     art:period ?periodUri ;
                     art:isDisplayedAt ?museum .
            ?periodUri rdfs:label ?periodLabel .
            FILTER(CONTAINS(LCASE(?periodLabel), LCASE(@period)))
        }
        ORDER BY ?title";

    var parameters = new SparqlParameterCollection
    {
        { "@period", period }
    };

    try {
        var results = await _rdfService.ExecuteQuery(query, parameters);
        return Ok(results);
    }
    catch (RdfQueryException ex) {
        _logger.LogError(ex, "Error querying paintings by period");
        return StatusCode(500, "Error executing SPARQL query");
    }
}
        </pre>
    </div>

    <h3>12.2 RDF Data Processing Example</h3>
    <div class="component-details">
        <pre>
// Example from RdfProcessor.cs
public class RdfProcessor
{
    private readonly IGraph _graph;
    
    public async Task ProcessArtworkData(Stream rdfData)
    {
        try {
            // Load RDF data
            _graph.LoadFromStream(rdfData);

            // Validate against schema
            var validator = new RdfSchemaValidator();
            var validationResults = await validator.ValidateAsync(_graph);

            if (!validationResults.IsValid)
            {
                throw new RdfValidationException(
                    "Invalid RDF data: " + 
                    string.Join(", ", validationResults.Errors)
                );
            }

            // Process triples
            foreach (var triple in _graph.Triples)
            {
                await ProcessTriple(triple);
            }
        }
        catch (RdfParseException ex)
        {
            _logger.LogError(ex, "Error parsing RDF data");
            throw;
        }
    }
}
        </pre>
    </div>
</section>

<section id="ui-screenshots">
    <h2>13. User Interface Documentation</h2>

    <h3>13.1 Paintings Search Interface</h3>
    <div class="component-details">
        <p>The paintings search interface allows users to filter artworks by period, artist, and museum:</p>
        <!-- Add your actual screenshot here -->
        <div class="screenshot">
            [Screenshot: Paintings Search Interface]
            <!-- <img src="screenshots/paintings-search.png" alt="Paintings Search Interface"> -->
        </div>
        <p>Key features visible in the interface:</p>
        <ul>
            <li>Advanced filtering options</li>
            <li>Real-time search results</li>
            <li>Thumbnail previews</li>
            <li>Quick view modal</li>
        </ul>
    </div>

    <h3>13.2 Ontology Visualization</h3>
    <div class="component-details">
        <!-- Add your actual screenshot here -->
        <div class="screenshot">
            [Screenshot: Ontology Graph Visualization]
            <!-- <img src="screenshots/ontology-viz.png" alt="Ontology Visualization"> -->
        </div>
        <p>The ontology visualization provides:</p>
        <ul>
            <li>Interactive graph navigation</li>
            <li>Zoom and pan controls</li>
            <li>Class hierarchy display</li>
            <li>Property relationship visualization</li>
        </ul>
    </div>
</section>

<section id="sequence-diagrams">
    <h2>14. Operation Sequence Diagrams</h2>

    <h3>14.1 SPARQL Query Flow</h3>
    <div class="sequence-diagram">
        <!-- Add your actual sequence diagram here -->
        [Sequence Diagram: SPARQL Query Process]
        <!--
        Client -> UI Service: Request Paintings
        UI Service -> RDF Service: Execute SPARQL Query
        RDF Service -> Triple Store: Query Data
        Triple Store -> RDF Service: Return Results
        RDF Service -> UI Service: Process Results
        UI Service -> Client: Display Results
        -->
    </div>

    <h3>14.2 Data Update Flow</h3>
    <div class="sequence-diagram">
        <!-- Add your actual sequence diagram here -->
        [Sequence Diagram: RDF Data Update Process]
    </div>
</section>

<section id="performance">
    <h2>15. Performance Metrics and Optimization</h2>

    <h3>15.1 Current Performance Metrics</h3>
    <div class="component-details">
        <table class="metrics-table">
            <tr>
                <th>Operation</th>
                <th>Average Response Time</th>
                <th>95th Percentile</th>
                <th>Success Rate</th>
            </tr>
            <tr>
                <td>Simple SPARQL Query</td>
                <td>120ms</td>
                <td>200ms</td>
                <td>99.9%</td>
            </tr>
            <tr>
                <td>Complex Graph Query</td>
                <td>350ms</td>
                <td>500ms</td>
                <td>99.5%</td>
            </tr>
            <tr>
                <td>Ontology Visualization</td>
                <td>800ms</td>
                <td>1200ms</td>
                <td>99.0%</td>
            </tr>
        </table>
    </div>

    <h3>15.2 Optimization Techniques</h3>
    <div class="component-details">
        <h4>Query Optimization</h4>
        <ul>
            <li>Use of SPARQL query caching</li>
            <li>Indexed graph patterns</li>
            <li>Query result pagination</li>
        </ul>

        <h4>Implementation Example:</h4>
        <pre>
public class SparqlQueryCache
{
    private readonly IMemoryCache _cache;
    private readonly TimeSpan _defaultExpiration = TimeSpan.FromMinutes(10);

    public async Task<IEnumerable<T>> GetOrExecuteQuery<T>(
        string query,
        Func<Task<IEnumerable<T>>> queryExecutor)
    {
        var cacheKey = ComputeQueryHash(query);
        
        if (!_cache.TryGetValue(cacheKey, out IEnumerable<T> results))
        {
            results = await queryExecutor();
            
            var cacheOptions = new MemoryCacheEntryOptions()
                .SetSlidingExpiration(_defaultExpiration);
                
            _cache.Set(cacheKey, results, cacheOptions);
        }
        
        return results;
    }
}
        </pre>
    </div>
</section>

<section id="troubleshooting">
    <h2>16. Troubleshooting Guide</h2>

    <h3>16.1 Common Issues</h3>
    <div class="component-details">
        <div class="alert-box alert-warning">
            <h4>Slow Query Performance</h4>
            <p><strong>Symptoms:</strong> SPARQL queries taking longer than 500ms to execute</p>
            <p><strong>Solution:</strong></p>
            <ul>
                <li>Check query patterns for optimization</li>
                <li>Verify triple store indexes</li>
                <li>Review cache implementation</li>
            </ul>
        </div>

        <div class="alert-box alert-danger">
            <h4>RDF Data Validation Errors</h4>
            <p><strong>Symptoms:</strong> Invalid RDF data exceptions during updates</p>
            <p><strong>Solution:</strong></p>
            <pre>
// Validation check implementation
public async Task ValidateRdfData(IGraph graph)
{
    var validator = new RdfValidator();
    var results = await validator.ValidateAsync(graph);
    
    if (!results.IsValid)
    {
        _logger.LogError("RDF Validation Failed: {0}",
            string.Join(", ", results.Errors));
        throw new RdfValidationException(results.Errors);
    }
}
            </pre>
        </div>
    </div>
</section>

<section id="security">
    <h2>17. Security Considerations</h2>

    <h3>17.1 Authentication and Authorization</h3>
    <div class="security-note">
        <h4>Implementation Example:</h4>
        <pre>
[Authorize]
public class RdfController : ControllerBase
{
    private readonly IRdfService _rdfService;
    private readonly IAuthorizationService _authorizationService;

    [HttpPost("update")]
    public async Task<IActionResult> UpdateRdfData(
        [FromBody] RdfUpdateRequest request)
    {
        // Check if user has required permissions
        var authResult = await _authorizationService
            .AuthorizeAsync(User, request, "RdfUpdatePolicy");
            
        if (!authResult.Succeeded)
        {
            return Forbid();
        }

        // Proceed with update
        await _rdfService.UpdateData(request);
        return Ok();
    }
}
        </pre>
    </div>

    <h3>17.2 SPARQL Injection Prevention</h3>
    <div class="security-note">
        <h4>Security Measures:</h4>
        <ul>
            <li>Parameter sanitization</li>
            <li>Query whitelisting</li>
            <li>Rate limiting</li>
        </ul>

        <h4>Implementation Example:</h4>
        <pre>
public class SparqlSecurity
{
    public string SanitizeQueryParameter(string parameter)
    {
        if (string.IsNullOrEmpty(parameter))
            return parameter;

        // Remove potentially dangerous characters
        return Regex.Replace(parameter, @"[^\w\s-]", "");
    }

    public bool ValidateQuery(string query)
    {
        // Check for prohibited patterns
        var prohibited = new[] {
            "DELETE",
            "DROP",
            "LOAD",
            "CLEAR"
        };

        return !prohibited.Any(p => 
            query.ToUpperInvariant().Contains(p));
    }
}
        </pre>
    </div>

    <h3>17.3 Security Headers</h3>
    <div class="security-note">
        <pre>
public void Configure(IApplicationBuilder app)
{
    app.Use(async (context, next) =>
    {
        context.Response.Headers.Add(
            "Content-Security-Policy",
            "default-src 'self'; " +
            "script-src 'self' 'unsafe-inline' 'unsafe-eval'; " +
            "style-src 'self' 'unsafe-inline';"
        );
        context.Response.Headers.Add(
            "X-Content-Type-Options",
            "nosniff"
        );
        context.Response.Headers.Add(
            "X-Frame-Options",
            "SAMEORIGIN"
        );
        await next();
    });
}
        </pre>
    </div>
</section>

<footer id="footer">
    <p>© 2025 Art Gallery RDF Application Documentation</p>
</footer>

</body>
</html>
