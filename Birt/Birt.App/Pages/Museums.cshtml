@page "/Museums"
@model Birt.App.Pages.Museums

<h1>Compare Paintings</h1>

<form id="comparisonForm" method="get">
    <div class="form-group">
        <label for="artist">Select Artist:</label>
        <select id="artist" name="artist" class="form-control" onchange="updateMessage()">
            <option value="">-- Select Artist --</option>
            <option value="Q762">Leonardo da Vinci</option>
            <option value="Q5582">Vincent van Gogh</option>
            <option value="Q5593">Pablo Picasso</option>
            <option value="Q5592">Michelangelo</option>
            <option value="Q296">Claude Monet</option>
            <option value="Q5598">Rembrandt</option>
        </select>
    </div>

    <div class="form-group">
        <label for="museum">Select Museum:</label>
        <select id="museum" name="museum" class="form-control" onchange="updateMessage()">
            <option value="">-- Select Museum --</option>
            <option value="Q19675">Louvre Museum</option>
            <option value="Q6373">British Museum</option>
            <option value="Q160236">Metropolitan Museum of Art</option>
            <option value="Q190804">Rijksmuseum</option>
            <option value="Q160112">Prado Museum</option>
            <option value="Q51252">Uffizi Gallery</option>
            <option value="Q224124">Van Gogh Museum</option>
        </select>
    </div>

    <p id="dynamicMessage" style="font-style: italic; color: #555;">
        Select an artist and a museum to see paintings from the artist that are not in the museum.
    </p>
    
    <button type="submit" class="btn btn-primary">Compare</button>
</form>

<div id="results">
    <h2>Results</h2>
    <button id="hideTableBtn" class="btn btn-secondary" style="display: none;" onclick="toggleResultsTable()">Hide Table</button>
    <table class="table" id="resultsTable" style="display: none;">
        <thead>
        <tr>
            <th>Painting</th>
            <th>Title</th>
            <th>Museum</th>
        </tr>
        </thead>
        <tbody id="resultsBody">
        </tbody>
    </table>
    <p id="noResults" style="display: none;">No results found.</p>
</div>

<hr />

<h1>Find Museums and Other Artists</h1>

<form id="artistMuseumForm" method="get">
    <div class="form-group">
        <label for="selectedArtist">Select Artist:</label>
        <select id="selectedArtist" name="selectedArtist" class="form-control">
            <option value="">-- Select Artist --</option>
            <option value="Q762">Leonardo da Vinci</option>
            <option value="Q5582">Vincent van Gogh</option>
            <option value="Q5593">Pablo Picasso</option>
            <option value="Q5592">Michelangelo</option>
            <option value="Q296">Claude Monet</option>
            <option value="Q5598">Rembrandt</option>
        </select>
    </div>

    <button type="submit" class="btn btn-primary">Find Museums</button>
</form>

<div id="museumResults">
    <h2>Museum and Other Artists</h2>
    <button id="hideMuseumResultsBtn" class="btn btn-secondary" style="display: none;" onclick="toggleMuseumResultsTable()">Hide Table</button>
    <table class="table" id="museumResultsTable" style="display: none;">
        <thead>
        <tr>
            <th>Museum</th>
            <th>Other Artists</th>
        </tr>
        </thead>
        <tbody id="museumResultsBody">
        </tbody>
    </table>
    <p id="noMuseumResults" style="display: none;">No results found.</p>
</div>
<hr />

<h1>Find Similar Paintings</h1>

<form id="similarPaintingsForm" method="get">
    <div class="form-group">
        <label for="similarArtist">Select Artist:</label>
        <select id="similarArtist" name="similarArtist" class="form-control">
            <option value="">-- Select Artist --</option>
            <option value="Q762">Leonardo da Vinci</option>
            <option value="Q5582">Vincent van Gogh</option>
            <option value="Q5593">Pablo Picasso</option>
            <option value="Q5592">Michelangelo</option>
            <option value="Q296">Claude Monet</option>
            <option value="Q5598">Rembrandt</option>
        </select>
    </div>

    <div class="form-group">
        <label for="similarMuseum">Select Museum:</label>
        <select id="similarMuseum" name="similarMuseum" class="form-control">
            <option value="">-- Select Museum --</option>
            <option value="Q19675">Louvre Museum</option>
            <option value="Q6373">British Museum</option>
            <option value="Q160236">Metropolitan Museum of Art</option>
            <option value="Q190804">Rijksmuseum</option>
            <option value="Q160112">Prado Museum</option>
            <option value="Q51252">Uffizi Gallery</option>
            <option value="Q224124">Van Gogh Museum</option>
        </select>
    </div>

    <button type="submit" class="btn btn-primary">Find Similar Paintings</button>
</form>

<div id="similarPaintingsResults">
    <h2>Similar Paintings</h2>
    <button id="hideSimilarPaintingsBtn" class="btn btn-secondary" style="display: none;" onclick="toggleSimilarPaintingsTable()">Hide Table</button>
    <table class="table" id="similarPaintingsTable" style="display: none;">
        <thead>
        <tr>
            <th>Painting</th>
            <th>Artist</th>
            <th>Museum</th>
            <th>Image</th>
        </tr>
        </thead>
        <tbody id="similarPaintingsBody">
        </tbody>
    </table>
    <p id="noSimilarResults" style="display: none;">No results found.</p>
</div>

<div id="myModal" class="modal">
    <span class="close">&times;</span>
    <img class="modal-content" id="img01">
    <div id="caption"></div>
</div>

<script type="module">
    import { fetchComparisonResults, updateMessage, fetchMuseumAndArtists, fetchSimilarPaintings } from '/js/museum-comparison.js';

    document.getElementById('comparisonForm').addEventListener('submit', fetchComparisonResults);
    document.getElementById('artist').addEventListener("change", updateMessage);
    document.getElementById('museum').addEventListener("change", updateMessage);
    document.getElementById('artistMuseumForm').addEventListener('submit', fetchMuseumAndArtists);
    document.getElementById('similarPaintingsForm').addEventListener('submit', fetchSimilarPaintings);
    window.toggleResultsTable = function () {
        const resultsTable = document.getElementById("resultsTable");
        const hideTableBtn = document.getElementById("hideTableBtn");

        if (resultsTable.style.display === "none") {
            resultsTable.style.display = "table";
            hideTableBtn.textContent = "Hide Table";
        } else {
            resultsTable.style.display = "none";
            hideTableBtn.textContent = "Show Table";
        }
    };
    window.toggleMuseumResultsTable = function () {
        const resultsTable = document.getElementById("museumResultsTable");
        const hideTableBtn = document.getElementById("hideMuseumResultsBtn");

        if (resultsTable.style.display === "none") {
            resultsTable.style.display = "table";
            hideTableBtn.textContent = "Hide Table";
        } else {
            resultsTable.style.display = "none";
            hideTableBtn.textContent = "Show Table";
        }
    };

    window.toggleSimilarPaintingsTable = function () {
        const resultsTable = document.getElementById("similarPaintingsTable");
        const hideTableBtn = document.getElementById("hideSimilarPaintingsBtn");

        if (resultsTable.style.display === "none") {
            resultsTable.style.display = "table";
            hideTableBtn.textContent = "Hide Table";
        } else {
            resultsTable.style.display = "none";
            hideTableBtn.textContent = "Show Table";
        }
    };


</script>
